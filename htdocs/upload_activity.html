<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Move2Earn â€” Upload Activity</title>
  <link rel="stylesheet" href="./static/styles.css">
  <style>
    .form-card{max-width:600px;margin:40px auto;padding:20px;background:rgba(255,255,255,0.03);border-radius:8px}
    label{display:block;margin:8px 0 4px;color:#ddd}
    input,select,textarea{width:100%;padding:10px;border-radius:6px;border:1px solid rgba(255,255,255,0.08);background:transparent;color:#fff}
  </style>
</head>
<body>
  <div class="container">
    <header style="margin-top:20px;display:flex;justify-content:space-between;align-items:center;">
      <div class="logo"><img src="./static/logo.png" class="logo-img" alt="Move2Earn"> <span>Move2Earn</span></div>
      <div><a class="btn btn-secondary" href="dashboard.html">Back</a></div>
    </header>
    <main>
      <div class="form-card">
        <h3>Manual Activity Upload</h3>
        <label for="desc">Description</label>
        <input id="desc" placeholder="Walk to the park">
        <label for="minutes">Earned minutes</label>
        <input id="minutes" type="number" placeholder="30">
        <label for="date">Date</label>
        <input id="date" type="datetime-local">
        <div style="margin-top:12px;text-align:right">
          <button id="saveBtn" class="btn btn-primary">Save Activity</button>
        </div>
      </div>
    </main>
  </div>
  <script src="./static/js/app.js"></script>
  <script>
    const cur = localStorage.getItem('move2earn_current');
    if (!cur) location.href='login.html';
    document.getElementById('saveBtn').addEventListener('click', () => {
      const desc = document.getElementById('desc').value || 'Manual upload';
      const minutes = parseInt(document.getElementById('minutes').value||0,10);
      const date = document.getElementById('date').value ? new Date(document.getElementById('date').value).toISOString() : new Date().toISOString();
      const key = 'activities_'+cur;
      const arr = JSON.parse(localStorage.getItem(key)||'[]');
      arr.push({description:desc, earnedMinutes: minutes, createdAt: date, source: 'manual'});
      localStorage.setItem(key, JSON.stringify(arr));
      alert('Saved');
      location.href='dashboard.html';
    });
  </script>
</body>
</html>
